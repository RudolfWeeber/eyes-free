<?xml version="1.0" encoding="UTF-8"?>
  <ss:speechstrategy xmlns:ss="http://www.google.android.marvin.talkback.com/speechstrategy" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://www.google.android.marvin.talkback.com/speechstrategy speechstrategy.xsd">

  <!-- TYPE_WINDOW_STATE_CHANGED -->

  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_WINDOW_STATE_CHANGED</ss:eventType>
      <ss:className>com.google.android.voicesearch.RecognitionActivity</ss:className>
    </ss:filter>
  </ss:rule>

  <!-- TYPE_VIEW_CLICKED -->

  <!-- CompoundButton - selected -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_CLICKED</ss:eventType>
      <ss:className>android.widget.CompoundButton</ss:className>
      <ss:checked>true</ss:checked>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/value_checked</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- CompoundButton - not selected -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_CLICKED</ss:eventType>
      <ss:className>android.widget.CompoundButton</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/value_not_checked</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- All other -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_CLICKED</ss:eventType>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/value_clicked</ss:template>
    </ss:formatter>
  </ss:rule>

  <!-- TYPE_VIEW_FOCUSED -->

  <!-- Special case to avoid double announcing MP3 store results.   -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>android.widget.RelativeLayout</ss:className>
      <ss:packageName>com.amazon.mp3</ss:packageName>
    </ss:filter>
  </ss:rule>

  <!-- Special case for not speaking the 'Speak Now' dialog.       -->
  <!-- Announcing this dialog is caught by the speech recognition. -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>android.widget.TextView</ss:className>
      <ss:packageName>com.google.android.voicesearch</ss:packageName>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/earcon_progress</ss:template>
    </ss:formatter>
  </ss:rule>

  <!--Locking the screen -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>com.android.internal.policy.impl.LockScreen</ss:className>
      <ss:packageName>android</ss:packageName>
    </ss:filter>
  </ss:rule>

  <!-- Special case for not speaking the Lock screen dialog.       -->
  <!-- We drop this event on the floor without any action          -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>com.android.internal.policy.impl.LockPatternKeyguardView</ss:className>
      <ss:packageName>android</ss:packageName>
    </ss:filter>
  </ss:rule>

  <!-- CompoundButton - selected -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>android.widget.CompoundButton</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_compound_button_checked</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- CompoundButton - not selected -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>android.widget.CompoundButton</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_compound_button_not_checked</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- EditText - password -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>android.widget.EditText</ss:className>
      <ss:password>true</ss:password>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/value_password</ss:template>
    </ss:formatter>
  </ss:rule>

  <!-- EditText - not password -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>android.widget.EditText</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_edit_box</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- TextView - Launcher application - icons -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>com.android.launcher.BubbleTextView</ss:className>
      <ss:packageName>com.android.launcher</ss:packageName>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_announce_value</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- TextView - Launcher application - options -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>com.android.internal.view.menu.IconMenuItemView</ss:className>
      <ss:packageName>com.android.launcher</ss:packageName>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_announce_value</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- TextView - Launcher application - serach box -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>android.widget.TextView</ss:className>
      <ss:packageName>com.android.launcher</ss:packageName>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_search_box</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- TextView - Launcher2 application - icons -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>com.android.launcher2.BubbleTextView</ss:className>
      <ss:packageName>com.android.launcher2</ss:packageName>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_announce_value</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- TextView - Launcher2 application - options -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>com.android.internal.view.menu.IconMenuItemView</ss:className>
      <ss:packageName>com.android.launcher2</ss:packageName>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_announce_value</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- TextView - Launcher2 application - serach box -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>android.widget.TextView</ss:className>
      <ss:packageName>com.android.launcher2</ss:packageName>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_search_box</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- HandleView -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
      <ss:className>com.android.launcher.HandleView</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/value_handle_view</ss:template>
    </ss:formatter>
  </ss:rule>

  <!-- All other -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_FOCUSED</ss:eventType>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_announce_value</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- TYPE_VIEW_SELECTED -->

  <!-- AlertController$RecycleListView - Settings - checked -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_SELECTED</ss:eventType>
      <ss:className>com.android.internal.app.AlertController$RecycleListView</ss:className>
      <ss:checked>true</ss:checked>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_compound_button_checked</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- All -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_SELECTED</ss:eventType>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_announce_value</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- TYPE_WINDOW_STATE_CHANGED -->

  <!-- Special case for not speaking the Lock screen dialog.       -->
  <!-- We drop this event on the floor without any action          -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_WINDOW_STATE_CHANGED</ss:eventType>
      <ss:className>com.android.internal.policy.impl.KeyguardViewManager$KeyguardViewHost</ss:className>
      <ss:packageName>android</ss:packageName>
    </ss:filter>
  </ss:rule>

  <!-- SoftInputWindow -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_WINDOW_STATE_CHANGED</ss:eventType>
      <ss:className>android.inputmethodservice.SoftInputWindow</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/value_input_method_shown</ss:template>
    </ss:formatter>
  </ss:rule>

  <!-- In call screen -->
  <ss:rule>
    <ss:metadata>
      <ss:queuing>INTERRUPT</ss:queuing>
    </ss:metadata>
    <ss:filter>
      <ss:eventType>TYPE_WINDOW_STATE_CHANGED</ss:eventType>
      <ss:className>com.android.phone.InCallScreen</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:custom>com.google.android.marvin.talkback.CustomFormatters$InCallScreenFormatter</ss:custom>
    </ss:formatter>
  </ss:rule>

  <!-- Activity -->
  <ss:rule>
    <ss:metadata>
      <ss:queuing>INTERRUPT</ss:queuing>
    </ss:metadata>
    <ss:filter>
      <ss:eventType>TYPE_WINDOW_STATE_CHANGED</ss:eventType>
      <ss:className>android.app.Activity</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_announce_value</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- StatusBarService$ExpandedDialog -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_WINDOW_STATE_CHANGED</ss:eventType>
      <ss:className>com.android.server.status.StatusBarService$ExpandedDialog</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/value_status_bar_opened</ss:template>
    </ss:formatter>
  </ss:rule>

  <!-- Dialog -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_WINDOW_STATE_CHANGED</ss:eventType>
      <ss:className>android.app.Dialog</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_alert_dialog_template</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- IconMenuView -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_WINDOW_STATE_CHANGED</ss:eventType>
      <ss:className>com.android.internal.view.menu.IconMenuView</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/value_options_menu_open</ss:template>
    </ss:formatter>
  </ss:rule>

  <!-- SlidingDrawer -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_WINDOW_STATE_CHANGED</ss:eventType>
      <ss:className>android.widget.SlidingDrawer</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/value_sliding_drawer_opened</ss:template>
    </ss:formatter>
  </ss:rule>

  <!-- LinearLayout -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_WINDOW_STATE_CHANGED</ss:eventType>
      <ss:className>android.widget.LinearLayout</ss:className>
    </ss:filter>
    <ss:formatter>
      <ss:template>@com.google.android.marvin.talkback:string/template_announce_value</ss:template>
      <ss:property>text</ss:property>
    </ss:formatter>
  </ss:rule>

  <!-- TYPE_VIEW_TEXT_CHANGED -->

  <!-- Text added -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_TEXT_CHANGED</ss:eventType>
      <ss:removedCount>0</ss:removedCount>
    </ss:filter>
    <ss:formatter>
      <ss:custom>com.google.android.marvin.talkback.CustomFormatters$AddedTextFormatter</ss:custom>
    </ss:formatter>
  </ss:rule>

  <!-- Text deleted -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_TEXT_CHANGED</ss:eventType>
      <ss:addedCount>0</ss:addedCount>
    </ss:filter>
    <ss:formatter>
      <ss:custom>com.google.android.marvin.talkback.CustomFormatters$RemovedTextFormatter</ss:custom>
    </ss:formatter>
  </ss:rule>

  <!-- Text replaced -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_VIEW_TEXT_CHANGED</ss:eventType>
    </ss:filter>
    <ss:formatter>
      <ss:custom>com.google.android.marvin.talkback.CustomFormatters$ReplacedTextFormatter</ss:custom>
    </ss:formatter>
  </ss:rule>

  <!-- TYPE_NOTIFICATION_STATE_CHANGED -->

  <!-- All -->
  <ss:rule>
    <ss:filter>
      <ss:eventType>TYPE_NOTIFICATION_STATE_CHANGED</ss:eventType>
    </ss:filter>
    <ss:formatter>
      <ss:custom>com.google.android.marvin.talkback.CustomFormatters$NotificationFormatter</ss:custom>
    </ss:formatter>
  </ss:rule>

</ss:speechstrategy>
